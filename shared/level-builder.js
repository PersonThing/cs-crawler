import { Textures } from '../client/src/textures.js'
import Block from './block.js'
import Level from './level.js'
import Tile from './tile.js'

const textureMap = {
  0: null,
  1: Textures.tiles.rocks,
  2: Textures.tiles.stone,
  3: Textures.tiles.blackstone,
}

export const generateSampleLevel = () => {
  const level = new Level()
  const Tiles = {
    DoorRightTop: [
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
      [2, 1, 1, 3, 3, 3, 3, 1, 1, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 1],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ],
    DoorLeft: [
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
      [1, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ],
    DoorRightBottom: [
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 1],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
    ],
    DoorRightTopBottom: [
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
      [2, 1, 1, 3, 3, 3, 3, 1, 1, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 1],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
    ],
    DoorLeftTop: [
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
      [2, 1, 1, 3, 3, 3, 3, 1, 1, 2],
      [1, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ],
    DoorLeftTopBottom: [
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
      [2, 1, 1, 3, 3, 3, 3, 1, 1, 2],
      [1, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
    ],
    DoorLeftRightTop: [
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
      [2, 1, 1, 3, 3, 3, 3, 1, 1, 2],
      [1, 3, 3, 3, 3, 3, 3, 3, 3, 1],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ],
    DoorLeftBottom: [
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
      [1, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
    ],
    DoorLeftRightBottom: [
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
      [1, 3, 3, 3, 3, 3, 3, 3, 3, 1],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
    ],
    DoorTop: [
      [2, 2, 2, 3, 3, 3, 3, 2, 2, 2],
      [2, 1, 1, 3, 3, 3, 3, 1, 1, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 3, 3, 3, 3, 3, 3, 3, 3, 2],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ],
    HallwayVertical: [
      [1, 1, 2, 3, 3, 3, 3, 2, 1, 1],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
      [0, 0, 2, 3, 3, 3, 3, 2, 0, 0],
    ],
    HallwayHorizontal: [
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [3, 3, 3, 3, 3, 3, 3, 3, 3, 3],
      [2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
  }

  Object.entries(Tiles).forEach(([key, value]) => {
    Tiles[key] = {
      label: key,
      grid: value
    }
  })

  const t = (config) => {
    const tile = new Tile(config.label)
    config.grid.forEach((row, y) => {
      row.forEach((n, x) => {
        tile.setBlock(
          new Block({
            x,
            y,
            canWalk: n == 3 ? true : false,
            canSeeThrough: n == 3 ? true : false,
            canShootThrough: n == 3 ? true : false,
            texture: textureMap[n],
          })
        )
      })
    })
    return tile
  }

  level.tileGrid = [
    [
      t(Tiles.DoorRightBottom),
      t(Tiles.HallwayHorizontal),
      t(Tiles.DoorLeftRightBottom),
      t(Tiles.HallwayHorizontal),
      t(Tiles.HallwayHorizontal),
      t(Tiles.DoorLeftBottom),
    ],
    [
      t(Tiles.DoorRightTopBottom),
      t(Tiles.DoorLeftRightBottom),
      t(Tiles.DoorLeftTop),
      t(Tiles.DoorRightBottom),
      t(Tiles.HallwayHorizontal),
      t(Tiles.DoorLeftTop),
    ],
    [
      t(Tiles.DoorRightTop),
      t(Tiles.DoorLeftRightTop),
      t(Tiles.HallwayHorizontal),
      t(Tiles.DoorLeftTopBottom),
    ],
    [null, null, null, t(Tiles.HallwayVertical)],
    [
      null,
      null,
      null,
      t(Tiles.DoorRightTop),
      t(Tiles.HallwayHorizontal),
      t(Tiles.DoorLeftRightBottom),
      t(Tiles.DoorLeft),
    ],
    [null, null, null, null, null, t(Tiles.DoorTop)],
  ]

  level.start = {
    x: 2600,
    y: 2600,
  }

  return level
}
